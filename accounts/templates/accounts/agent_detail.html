{# accounts/templates/accounts/agent_detail.html #}
{% extends 'accounts/base.html' %}
{% load static %}

{% block content %}
<div class="container-fluid">
    <div class="row">

    
    {# Sidebar #}
    <nav id="sidebar" class="col-md-3 col-lg-2 d-md-block bg-light sidebar">
        <div class="position-sticky pt-3">
          {% if agency.logo %}
            <img src="{{ agency.logo.url }}" alt="{{ agency.agency_name }} Logo" class="img-fluid rounded-circle mb-3">
          {% else %}
            <p>No logo uploaded</p>
          {% endif %}
  
          <ul class="nav flex-column">
            <li class="nav-item">
              <a class="nav-link" href="{% url 'accounts:agency_detail' agency.pk %}">
                <i class="fas fa-chart-bar"></i> Agency Statistics
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="{% url 'accounts:agency_info' agency.pk %}">
                <i class="fas fa-info-circle"></i> Agency Information
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'accounts:agency_kyc' agency.pk %}">
                <i class="fas fa-file-alt"></i> KYC Documents
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'accounts:agent_list' agency.pk %}">
                <i class="fas fa-users"></i> Manage Agents
              </a>
            </li>
          </ul>
        </div>
      </nav>
  

        {# Main Content #}
        <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
            <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                <h1 class="h2">Agent Details</h1>
                {# You can add any additional buttons or controls here #}
            </div>

            <h2>Agent Information</h2>
            <p><strong>Username:</strong> {{ agent.account.username }}</p>
            <p><strong>Email:</strong> {{ agent.account.email }}</p>
            {# Display other agent-related information #}

            <h2>Recent Transactions</h2>
            {% if agent_transactions %}
                <div class = "table-responsive">
                <table class="table table-striped table-sm">
                  <thead>
                    <tr>
                      <th scope="col">Transaction time</th>
                      <th scope="col">Amount</th>
                      <th scope="col">Type</th>
                      <th scope="col">Receiver</th>
                      <th scope="col">Sender</th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for transaction in agent_transactions %}
                    <tr>
                      <td>{{transaction.date_heure}}</td>
                      <td>{{ transaction.montant }}</td>
                      <td>{{ transaction.type }}</td>
                      <td>{{ transaction.numero_recepteur }}</td>
                      <td>{{transaction.numero_expediteur}}</td>
                    </tr>
                    {% endfor %}
                  </tbody>
                </table>
                </div>
            {% else %}
                <p>No recent transactions found for this agent.</p>
            {% endif %}
        </main>
    </div>
</div>
{% endblock %}
